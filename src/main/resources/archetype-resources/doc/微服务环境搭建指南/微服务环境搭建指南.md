# 微服务环境搭建指南

[TOC]

## 1. 修改UTF-8和hostname

<https://github.com/nnzbz/notes/blob/master/linux/base/Linux%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.md>

## 2. 打开防火墙

常见要暴露的端口，注意需要浏览器访问的端口应避免分配 [err_unsafe_port](err_unsafe_port.md) 的端口

| SSH  | ngnix     | nexus                | minio        | torna | xxl_job_admin | nacos                | zipkin |
| :--- | --------- | -------------------- | ------------ | ----- | ------------- | -------------------- | ------ |
| 22   | 80<br>443 | 8081<br>8082<br>8083 | 9000<br>9001 | 7700  | 8080          | 8848<br>8849<br>8850 | 9411   |

## 3. 同步网络更新服务器时间

<https://github.com/nnzbz/notes/blob/master/linux/base/%E5%90%8C%E6%AD%A5%E7%BD%91%E7%BB%9C%E6%97%B6%E9%97%B4.md>

## 4. 共享存储NFS
  
<https://github.com/nnzbz/notes/blob/master/linux/base/%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8NFS.md>

## 5. 启用SELinux

<https://github.com/nnzbz/notes/blob/master/linux/security/SELinux%E5%85%A5%E9%97%A8.md>

## 6. 安装Docker及相关环境

- Docker
  <https://github.com/nnzbz/notes/blob/master/docker/Docker%E5%85%A5%E9%97%A8.md>
- Swarm
  <https://github.com/nnzbz/notes/blob/master/docker/Swarm/Swarm%E7%AE%80%E4%BB%8B.md>

## 7. 创建虚拟网络

创建虚拟网络提供给docker容器互联使用，在 `Manager` 节点运行如下命令:

```sh
docker network create -d overlay --attachable rebue
```

## 8. 创建并运行常用容器

**注意:** 请使用文档中的 `Swarm` 安装方案，在 Docker Compose文件中加入如下内容，以便容器能互联互通

```yaml
networks:
  default:
    external: true
    name: rebue
```

- ZooKeeper
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/Zookeeper.md>
- RabbitMQ
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/RabbitMQ.md>
- Redis
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/Redis.md>
- MySQL
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/MySQL/MySQL.md>
- MinIO
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/MinIO.md>
- Torna
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/torna.md>
- xxl-job-admin
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/xxl-job-admin.md>
- Nacos
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/Nacos.md>
- zipkin
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/zipkin/zipkin.md>
- Alibaba Sentinel DashBoard
  <https://github.com/DockerfileX/alibaba-sentinel-dashboard>
- Nginx
  <https://github.com/nnzbz/notes/blob/master/docker/%E5%B8%B8%E7%94%A8%E9%95%9C%E5%83%8F%E4%B8%8E%E5%AE%B9%E5%99%A8/nginx.md>
