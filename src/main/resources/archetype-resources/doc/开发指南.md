# 开发指南

## 1. 如何运行与测试

1. 生成代码
  运行xxx-gen项目下的XxxGen.java主程序(如果数据结构有修改可再次运行，如果没有修改，可省略此步)
2. 运行xxx-svr项目
  以Spring Boot App方式运行(右键单击项目 > Debug As > Spring Boot App)
3. 运行测试
  运行xxx-svr项目 src/test/java 下的测试程序(右击测试文件 > Run As > Junit Test)，查看日志，检查是否正常通过

## 2. 可能出现的问题

### 2.1. 启动服务器时可能会报 `Connection refused` 的错误

- 出错日志如下:
  
  ```java
  11:56:24,024[ WARN] [DUBBO] Connection refused (Connection refused), dubbo version: 2.7.6, current host: 127.0.1.1[,,,]---org.apache.dubbo.config.ServiceConfig.findConfigedHosts(ServiceConfig.java:592) main
  java.net.ConnectException: Connection refused (Connection refused)
  ....
  ```

- 其实可以忽略(似乎不影响，而且线上没有此问题)
- 如果有强迫症，可以修改配置文件如下

  ```yaml
  dubbo:
    protocol:
      # 指定好当前本机 ip 地址(否则开发环境有可能会报Connection refused的错误)
      host: 192.168.1.143
  
  ....

  # 下面的配置似乎画蛇添足
  spring:
    cloud:
      inetutils:
        # 限定选择前缀为 192 的 ip
        preferred-networks: 192
  ```

- 参考
  <https://www.cnblogs.com/liang1101/p/12702631.html>
